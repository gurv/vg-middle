plugins {
    id 'com.bmuschko.docker-remote-api' version '3.4.4' apply false
    id "org.sonarqube" version "2.6.2" apply false
}

configure(rootProject) {
    group = 'ru.gurv.vg'
    version = '0.1.0'

    ext {
        prometheusVersion = 'v2.3.1'
        prometheusWmiExporterVersion = '0.2.10'
        grafanaVersion = '5.1.4'
        h2Version = '2017-06-10'
        zookeeperVersion = '3.4.11'
        kafkaVersion = '1.1.0'
        confluentVersion = '4.1.1'
        elkVersion = '6.4.0'
    }
}

configure(subprojects) {
    repositories {
        mavenCentral()
        jcenter()
    }

    apply plugin: 'base'
    apply plugin: 'org.sonarqube'
    apply plugin: 'com.bmuschko.docker-remote-api'

    ext {
        dockerImageName = "gurv/${rootProject.name}-${project.path.substring(1).replace(':', '-')}:latest"
        dockerContainerName = "${rootProject.name}-${project.path.substring(1).replace(':', '-')}"
        dockerImageBuildArgs = []
    }
    docker {
        url = 'tcp://192.168.1.33:2373'
    }
}